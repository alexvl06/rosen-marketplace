{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class MarketplaceApiService {\n  constructor(http) {\n    this.http = http;\n    this.totalPages = 0;\n  }\n  getOffers(page, pageSize) {\n    const params = new HttpParams().set('index', page).set('size', pageSize);\n    return this.http.get(`${environment.URL}/Offer`, {\n      observe: 'response',\n      params: params\n    }).pipe(map(response => {\n      const headers = response.headers;\n      this.totalPages = Math.ceil(headers.get('total-offers') / pageSize);\n      console.log(this.totalPages);\n      return response.body;\n    }));\n  }\n  postOffer(offer) {\n    return this.http.post(`${environment.URL}/Offer`, offer);\n  }\n  getCategories() {\n    return this.http.get(`${environment.URL}/Category`);\n  }\n  static #_ = this.ɵfac = function MarketplaceApiService_Factory(t) {\n    return new (t || MarketplaceApiService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MarketplaceApiService,\n    factory: MarketplaceApiService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["HttpParams","environment","map","MarketplaceApiService","constructor","http","totalPages","getOffers","page","pageSize","params","set","get","URL","observe","pipe","response","headers","Math","ceil","console","log","body","postOffer","offer","post","getCategories","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Alexis Avila\\Documents\\codigo\\marketplace\\WebApp\\marketplace\\src\\app\\core\\marketplace-api\\marketplace-api.service.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {OfferModel} from './models/offer.model';\r\nimport { HttpClient, HttpParams, HttpResponse } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport {map} from 'rxjs/operators'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MarketplaceApiService {\r\n\r\n    totalPages:number = 0\r\n\r\n  constructor(\r\n    private http:HttpClient\r\n  ) { }\r\n\r\n  getOffers(page: number, pageSize: number): Observable<OfferModel[]> {\r\n    const params = new HttpParams()\r\n    .set('index', page )\r\n    .set('size',pageSize)\r\n    return this.http.get<OfferModel[]>(`${environment.URL}/Offer`, {\r\n      observe:'response',\r\n      params:params\r\n    })\r\n    .pipe(\r\n      map((response:HttpResponse<OfferModel[]>)=>{\r\n        const headers = response.headers;\r\n        this.totalPages = Math.ceil((headers.get('total-offers') as unknown as  number)/pageSize);\r\n        console.log(this.totalPages)\r\n        return response.body;\r\n      })\r\n    )\r\n  }\r\n\r\n  postOffer(offer:OfferModel) {\r\n    return this.http.post<boolean>(`${environment.URL}/Offer`,offer);\r\n  }\r\n\r\n  getCategories(): Observable<string[]> {\r\n    return this.http.get<string[]>(`${environment.URL}/Category`);\r\n  }\r\n}\r\n"],"mappings":"AAGA,SAAqBA,UAAU,QAAsB,sBAAsB;AAC3E,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SAAQC,GAAG,QAAO,gBAAgB;;;AAKlC,OAAM,MAAOC,qBAAqB;EAIhCC,YACUC,IAAe;IAAf,KAAAA,IAAI,GAAJA,IAAI;IAHZ,KAAAC,UAAU,GAAU,CAAC;EAInB;EAEJC,SAASA,CAACC,IAAY,EAAEC,QAAgB;IACtC,MAAMC,MAAM,GAAG,IAAIV,UAAU,EAAE,CAC9BW,GAAG,CAAC,OAAO,EAAEH,IAAI,CAAE,CACnBG,GAAG,CAAC,MAAM,EAACF,QAAQ,CAAC;IACrB,OAAO,IAAI,CAACJ,IAAI,CAACO,GAAG,CAAe,GAAGX,WAAW,CAACY,GAAG,QAAQ,EAAE;MAC7DC,OAAO,EAAC,UAAU;MAClBJ,MAAM,EAACA;KACR,CAAC,CACDK,IAAI,CACHb,GAAG,CAAEc,QAAmC,IAAG;MACzC,MAAMC,OAAO,GAAGD,QAAQ,CAACC,OAAO;MAChC,IAAI,CAACX,UAAU,GAAGY,IAAI,CAACC,IAAI,CAAEF,OAAO,CAACL,GAAG,CAAC,cAAc,CAAwB,GAACH,QAAQ,CAAC;MACzFW,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,UAAU,CAAC;MAC5B,OAAOU,QAAQ,CAACM,IAAI;IACtB,CAAC,CAAC,CACH;EACH;EAEAC,SAASA,CAACC,KAAgB;IACxB,OAAO,IAAI,CAACnB,IAAI,CAACoB,IAAI,CAAU,GAAGxB,WAAW,CAACY,GAAG,QAAQ,EAACW,KAAK,CAAC;EAClE;EAEAE,aAAaA,CAAA;IACX,OAAO,IAAI,CAACrB,IAAI,CAACO,GAAG,CAAW,GAAGX,WAAW,CAACY,GAAG,WAAW,CAAC;EAC/D;EAAC,QAAAc,CAAA,G;qBAhCUxB,qBAAqB,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAArB7B,qBAAqB;IAAA8B,OAAA,EAArB9B,qBAAqB,CAAA+B,IAAA;IAAAC,UAAA,EAFpB;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}